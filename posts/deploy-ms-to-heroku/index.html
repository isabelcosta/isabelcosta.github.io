<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Isabel Costa is a software engineer from Portugal, who really likes Open Source, Freecell, Clash of Clans, and much more."><link rel="shortcut icon" href=https://isabelcosta.github.io/favicon.ico><link rel=stylesheet href=/css/style.min.css><title>Deploying Mentorship Backend flask app on Heroku</title></head><body><header id=banner><h2><a href=https://isabelcosta.github.io/>Isabel Costa</a></h2><nav><ul><li><a href=/about/ title=about>about</a></li><li><a href=/posts/ title=posts>posts</a></li><li><a href=/talks/ title=talks>talks</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>Deploying Mentorship Backend flask app on Heroku</h1><div><time>June 27, 2020</time></div></header><p><img src=/images/deploy-ms-heroku-cover.png alt></p><p>At <a href=https://github.com/anitab-org>AnitaB.org Open Source</a> we have a project called Mentorship System, which I started during <a href=https://summerofcode.withgoogle.com/>Google Summer of Code</a> 2018. This project is composed of several repositories: <a href=https://github.com/anitab-org/mentorship-flutter>flutter</a>, <a href=https://github.com/anitab-org/mentorship-android>android</a>, <a href=https://github.com/anitab-org/mentorship-ios>ios</a>, and a <a href=https://github.com/anitab-org/mentorship-backend>backend</a> written in Python (Flask).</p><p>I want to describe how I deployed the backend REST API project on <a href=https://www.heroku.com/>Heroku</a>, using its <a href=https://www.heroku.com/pricing>free tier</a>.</p><h3 id=setup-project-to-be-deployable-on-heroku>Setup project to be deployable on HerokuÂ âš’ï¸</h3><p>So <a href=https://github.com/anitab-org/mentorship-backend>anitab-org/mentorship-backend</a> already could be run locally using simply <code>python run.py</code> command on a terminal and having the environment variables set.</p><p>However, I had to create a specific file and indicate the way I wanted to run the backend app on Heroku.</p><p>So to enable the project as it is to deploy on Heroku with a single click, just by connecting it with GitHub, I had to create a new file on the project called <code>Procfile</code> with this line, where <code>application</code> refers to the object that holds the flask app.</p><pre tabindex=0><code>web: gunicorn run:application
</code></pre><p>I created this pull request (PR) <a href=https://github.com/anitab-org/mentorship-backend/pull/640>#640 on anitab-org/mentorship-backend</a> to add the changes mentioned above. With these changes, anyone that forks the project on GitHub can follow the same procedure as I did and deploy the project on Heroku.</p><h3 id=deploy-on-heroku>Deploy on HerokuÂ ğŸš€</h3><p>Now that the project has everything that it needs to run on Heroku, let&rsquo;s create the configuration. In my personal account dashboard, I started by creating the app.</p><p><img src=/images/deploy-ms-heroku-2.png alt="I clicked the â€œCreate new appâ€ option on my Dashboard"></p><p>I gave it the name of the app, that will compose the Heroku app URL. In my case to get <a href=https://mentorship-backend-temp.herokuapp.com/>mentorship-backend-temp.herokuapp.com</a> I named the app <code>mentorship-backend-temp</code>Â . I also had to select a region between United States and Europe.</p><p><img src=/images/deploy-ms-heroku-3.png alt="â€œCreate New Appâ€ view onÂ Heroku"></p><p>Then I clicked the <strong>â€œConnect with GitHubâ€ option in the â€œDeployment methodâ€ section</strong> from the Deploy tab (which I was redirected to) and selected a repository on the <strong>â€œConnect to GitHubâ€ section</strong>, such as my mentorship-backend fork repository. Because I am one of the admins of the <a href=https://github.com/anitab-org>anitab-org on GitHub</a>, I ended up selecting is from the organization, instead of from my account.</p><p><img src=/images/deploy-ms-heroku-4.png alt="Connecting to GitHub on Heroku"></p><p>At this point, with the app configured on Heroku and connected to GitHub, we are able to see the current deployments of the app on both platforms.</p><p><img src=/images/deploy-ms-heroku-5.png alt="I set the Deployment method toÂ GitHub"></p><p><img src=/images/deploy-ms-heroku-6.png alt="Deployment link is available at {repository}/deployments onÂ GitHub"></p><p>Next, I had to <strong>create the</strong> <a href=https://github.com/anitab-org/mentorship-backend/blob/develop/docs/environment-variables.md><strong>environment variables</strong></a> that the project needs to run properly and also connect with a remote database. This section is available <strong>in the â€œSettingsâ€ tab</strong> of the app view on Heroku.</p><p><img src=/images/deploy-ms-heroku-7.png alt="Environment Variables Configuration section onÂ Heroku"></p><p>Then I made sure to <strong>deploy this app from the â€œDeployâ€ tab</strong>. As a result of this action, we have now the project deployed at:</p><p>â†’ <a href=https://mentorship-backend-temp.herokuapp.com/>https://mentorship-backend-temp.herokuapp.com/</a></p><p>In the end, I also <strong>enabled the Automatic Deploys</strong> feature. For that, I went to the page of the application on Heroku and went to the Deploy tab, and then enabled it. I could also enable Manual Deploy, which I used before, but since we are now paying close attention to what gets merged, I was confident in enabling it.</p><p><img src=/images/deploy-ms-heroku-8.png alt="Automatic Deploys section on Deploy tab in Heroku appÂ view"></p><p>Now that the app is deployed, I can access the logs of this server, and debug if anyone experiences a bug specific to this running instance of the app. Although we can only see the most recent logs, it still comes in handy.</p><p><img src=/images/deploy-ms-heroku-9.png alt="View logs of mentorship app onÂ Heroku"></p><h3 id=benefits-for-the-community->Benefits for the community ğŸ‘ğŸ¾</h3><p><img src=/images/deploy-ms-heroku-10.png alt="medium dark skin woman technologist emoji"></p><p>Previously we were deploying this app in <a href=https://aws.amazon.com/>Amazon Web Services (AWS)</a>. However, we had some issues that made the app stop working there, in which we could not have access to the AWS environment to look at the logs, so as a temporary solution I decided to host the backend REST API on Heroku.</p><p>While we donâ€™t have the app in production where we will potentially run the app on AWS, we can use Heroku to deploy the development version of the app. Although ever since I deployed to Heroku, I am amazed how this makes it easy to deploy the REST API and how anyone in the community can easily do this. Besides this, some weeks ago I discovered the <a href=https://devcenter.heroku.com/articles/github-integration-review-apps>Review App</a> feature which allows us to easily deploy an app for any PR sent to our repository (with a limit of the number of apps since Iâ€™m using free tier).</p><hr><p>I hope you enjoyed this blog post and learn about deploying apps into Heroku!</p><p>Interested in the project? You can reach us on <a href=https://github.com/anitab-org>GitHub</a> on <a href=https://anitab-org.zulipchat.com/>Zulip</a>.</p></article></main><footer id=footer>Copyright Â© 2022 Isabel Costa</footer></body></html>