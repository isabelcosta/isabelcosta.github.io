<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Isabel Costa is a software engineer from Portugal, who really likes Open Source, Freecell, Clash of Clans, and much more."><link rel="shortcut icon" href=https://isabelcosta.github.io/favicon.ico><link rel=stylesheet href=/css/style.min.css><title>How to change last commit message</title></head><body><header id=banner><h2><a href=https://isabelcosta.github.io/>Isabel Costa</a></h2><nav><ul><li><a href=/about/ title=about>about</a></li><li><a href=/posts/ title=posts>posts</a></li><li><a href=/talks/ title=talks>talks</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>How to change last commit message</h1><div><time>November 21, 2020</time></div></header><p>Often when making changes to code, I commit them and then have to change to commit I just made, either because I think the commit message could be better or I had to make a last-minute change to the code I wish to include in the commit.</p><h3 id=change-last-commit-message>Change last commit message</h3><p>So consider I committed changes with the following command (<code>-m</code> to write one line commit message):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;fix: big feature X&#34;</span>
</span></span></code></pre></div><p>Here’s how I fix the commit, using the <code>--amend</code> option.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git commit --amend -m <span style=color:#e6db74>&#34;fix: small feature X&#34;</span>
</span></span></code></pre></div><p>In case I want to add additional code to the commit, I run <code>git add &lt;file></code> before running <code>git commit --amend</code>.</p><h3 id=verify-new-commit-message>Verify new commit message</h3><p>To check that it worked and I fixed the right commit I check the latest commit with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git log --oneline
</span></span></code></pre></div><p>I use <code>--oneline</code> because I just want to see the commit messages, instead of also seeing the name and email of the author of the commit. You’ll an output similar to this, where you can see the last commit has the correct message:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ae81ff>1792519</span> <span style=color:#f92672>(</span>HEAD -&gt; master, origin/master, origin/HEAD<span style=color:#f92672>)</span> fix: small feature X
</span></span><span style=display:flex><span>701aa33  docs: add instructions to README
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>END<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>In my environment, this will open vim, which I close by typing <code>:q</code>.</p><h3 id=fix-pushed-commit>Fix pushed commit</h3><p>In case I already pushed to the remote repository the commit I want to fix, I force the push to remote to update the commit. Preferably, you are working on a feature specific branch, which does not affect the main one (in case this messes the git history for some reason). So this is what I would run, where <code>&lt;branch></code> is the branch you are working on (e.g.: <code>master</code>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git push -f origin &lt;branch&gt;
</span></span></code></pre></div><hr><p>Hope this helps you fix the last commit message.</p></article></main><footer id=footer>Copyright © Isabel Costa</footer></body></html>